%h1 Favorite Suppliers

%ul.favorite-suppliers-list
  - @favorites.each do |supplier|
    %li[supplier]
      =supplier.name
      = link_to 'delete', favorite_path(supplier), :method => :delete, :confirm => 'are you sure?'

= form_tag favorites_path, :method => :get do
  enter an email to search for a supplier
  = label_tag :supplier_email, 'Email'
  = text_field_tag :supplier_email
  = submit_tag 'Find Supplier'

-if defined?(@found_supplier)
  -if @found_supplier
    We found:
    = @found_supplier.name
    = link_to "Add to my favorite suppliers",
        create_for_known_supplier_favorite_invitations_path(:supplier_id => @found_supplier),
        :method => :post
  -else
    That supplier was not found
    = link_to "Add to my favorite as a new guest supplier", new_favorite_invitation_path(supplier_email: params[:supplier_email])
