%h1= @subscription.name
%h4
  = "Organization: #{@subscription.organization}"
  %br
  = "Chargify ID: #{@subscription.subscription_id}"

- if @subscription.exists_on_chargify?
  = form_for @subscription, url: admin_gateway_subscription_path(@subscription), html: { class: "form-horizontal edit_gateway_subscription" } do |f|
    .control-group
      = f.label :email, class: "control-label"
      .controls
        = f.text_field :email
    .control-group
      = f.label :product_handle, class: "control-label"
      .controls
        = f.select :product_handle, ["subout-national-service", "state-by-state-service", "subout-partner"], include_blank: false
    .subscription-regions
      .control-label
        = f.label :regions
      .control-group
        .check-all
          = check_box_tag "toggle_check_all", true
          = label_tag "toggle_check_all", "Check All"
        - GatewaySubscription.region_prices.each do |region|
          .controls
            = check_box_tag "gateway_subscription[regions][]", region[:name], @subscription.regions.include?(region[:name]), id: "gateway_subscription_regions_#{region[:name].tr(" ", "_")}"
            = label_tag "gateway_subscription_regions_#{region[:name].tr(" ", "_")}", "#{region[:name]} ($#{region[:price]})"

    .control-group
      = f.button :submit, class: "btn btn-danger"
      = link_to "Cancel", admin_gateway_subscriptions_path, class: "btn"
- else
  %p.alert.alert-error
    Subscription not found on Chargify
