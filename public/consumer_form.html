<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<form accept-charset="UTF-8" action="/consumers/quote_requests?consumer_id=54c8efb0726a61cde2000000" class="new_quote_request" id="new_quote_request" method="post" role="form"><div style="display:none"><input name="utf8" type="hidden" value="&#x2713;" /></div>  <div class="form-group"><label class="control-label" for="quote_request_first_name">First name</label><input class="form-control" id="quote_request_first_name" name="quote_request[first_name]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_last_name">Last name</label><input class="form-control" id="quote_request_last_name" name="quote_request[last_name]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_email">Email</label><input class="form-control" id="quote_request_email" name="quote_request[email]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_phone">Phone</label><input class="form-control" id="quote_request_phone" name="quote_request[phone]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_vehicle_type">Vehicle type</label><select class="form-control" id="quote_request_vehicle_type" name="quote_request[vehicle_type]"><option value=""></option>
        <option value="Sedan">Sedan</option>
        <option value="Limo">Limo</option>
        <option value="Party Bus">Party Bus</option>
        <option value="Limo Bus">Limo Bus</option>
        <option value="Mini Bus">Mini Bus</option>
        <option value="Motorcoach">Motorcoach</option>
        <option value="Double Decker Motorcoach">Double Decker Motorcoach</option>
        <option value="Executive Coach">Executive Coach</option>
        <option value="Sleeper Bus">Sleeper Bus</option>
        <option value="School Bus">School Bus</option></select></div>
        <div class="form-group"><label class="control-label" for="quote_request_vehicle_count">Vehicle count</label><input class="form-control" id="quote_request_vehicle_count" name="quote_request[vehicle_count]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_passengers">Passengers</label><input class="form-control" id="quote_request_passengers" name="quote_request[passengers]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_start_location">Pick up address</label><input class="form-control" id="quote_request_start_location" name="quote_request[start_location]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_start_date">Pick up date</label><input class="form-control" id="quote_request_start_date" name="quote_request[start_date]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_start_time">Start time</label><input class="form-control" id="quote_request_start_time" name="quote_request[start_time]" type="text" /><span class="help-block">hh:mm</span></div>
        <div class="form-group"><label class="control-label" for="quote_request_end_location">Drop off address</label><input class="form-control" id="quote_request_end_location" name="quote_request[end_location]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_end_date">Drop off date</label><input class="form-control" id="quote_request_end_date" name="quote_request[end_date]" type="text" /></div>
        <div class="form-group"><label class="control-label" for="quote_request_end_time">End time</label><input class="form-control" id="quote_request_end_time" name="quote_request[end_time]" type="text" /><span class="help-block">hh:mm</span></div>
        <div class="form-group"><label class="control-label" for="quote_request_trip_type">Trip type</label><select class="form-control" id="quote_request_trip_type" name="quote_request[trip_type]"><option value=""></option>
        <option value="Church Trip">Church Trip</option>
        <option value="Private Group">Private Group</option>
        <option value="Athletic Group">Athletic Group</option>
        <option value="Coroprate Group">Coroprate Group</option>
        <option value="Weddings">Weddings</option></select></div>
        <div class="form-group"><label class="control-label" for="quote_request_description">Description</label><textarea class="form-control" id="quote_request_description" name="quote_request[description]">&#x000A;</textarea></div>
        <input class="btn btn-danger" name="commit" type="submit" value="Request Quote" />
        <div class='errors'></div>
      </form>
      <script>
        var init_subout_quote_request_form = function(){
        
          var form = jQuery("#new_quote_request");
          jQuery(form).submit(function(e){
            e.preventDefault();
            var posting = jQuery.post( form.attr('action'), form.serialize());
            posting.done(function(data){
              form.html(data);
            });
            posting.fail(function(data){
              form.addClass('error');
        
              var errors_html = jQuery('.errors', form).html('');
              var errors = data.responseJSON.payload.errors;
              var error_messages = data.responseJSON.payload.error_messages;
        
              for(i=0;i<error_messages.length;i++){
                errors_html.append("<p class='error'>"+error_messages[i]+"</p>");
              }
        
              for(field in errors){
                jQuery('#quote_request_' + field).addClass('error');
              }
        
            });
          });
        }
        
        if(typeof jQuery=='undefined') {
          alert("jQuery is required");
        }else{
          init_subout_quote_request_form();
        }
      </script>