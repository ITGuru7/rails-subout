<div id="opportunity-form">
  <div class="modal-header">
    <button data-dismiss="modal" class="close" type="button">x</button>
    <h3>Opportunity</h3>
  </div>
  <div class="modal-body modal-content">
    <form name="newOpportunity" class="form-horizontal" ng-controller="OpportunityFormCtrl" novalidate>
      <div class="control-group" ng-class="{error:newOpportunity.opportunity_name.$invalid}">
        <label for="opportunity_name" class="control-label">Opportunity Title *</label>
        <div class="controls">
          <input type="text" id="opportunity_name" name="opportunity_name" ng-model="opportunity.name" size="30" 
            class="input-xlarge" required>

            <p class="help-block">
              Title Examples:
              <br/>Need 56 Pass 5/15 DC to NYC 8am to 8pm
              <br/>24 Pass open for 12/24 in Chicago from 8am to 4pm
              <br/>24 Pass party bus 50% off 12/22 in DC all day open
              <br/>Broken Down 195 mile marker 128 Please call me!
              <br/>Need Air Hose for T2145 Vanhool
            </p>
        </div>
      </div>

      <div class="control-group" ng-class="{error:newOpportunity.opportunity_type.$invalid}">
        <label for="opportunity_type" class="control-label">Opportunity Type *</label>
        <div class="controls">
          <select id="opportunity_type" ng-change="setOpportunityForwardAuction()" name="opportunity_type" ng-model="opportunity.type" ng-options="t for t in types" required>
          </select>
        </div>
      </div>

      <div class="control-group">
        <label for="opportunity_tracking_id" class="control-label">Internal Memo or ID#</label>
        <div class="controls">
          <input type="text" id="opportunity_tracking_id" ng-model="opportunity.tracking_id" size="30" class="input-xlarge">
        </div>
      </div>

      <div class="control-group">
        <label for="opportunity_vehicle_type" class="control-label">Vehicle Type</label>
        <div class="controls">
          <select id="opportunity_vehicle_type" name="opportunity_vehicle_type" ng-model="opportunity.vehicle_type" ng-options="t for t in VEHICLE_TYPES">
            <option value=""></option>
          </select>
        </div>
      </div>

      <div class="control-group" ng-class="{error:newOpportunity.opportunity_description.$invalid}">
        <label for="opportunity_description" class="control-label">Description *</label>
        <div class="controls">
          <textarea id="opportunity_description" name="opportunity_description" rows="5" ng-model="opportunity.description" cols="40" class="input-xlarge" required></textarea>
        </div>
      </div>

      <div class="control-group">
        <label for="opportunity_image_id" class="control-label">Opportunity image</label>
        <div class="controls">
          <input ng-init="setupFileUploader()" class="cloudinary-fileupload" data-url="https://api.cloudinary.com/v1_1/subout/auto/upload" name="file" type="file"></input>
          <input type="hidden" id="opportunity_image_id" class="file-upload-public-id" value="{{opportunity.image_id}}" ng-model="opportunity.image_id">
          <div id="progress">
            <div class="bar" style="width: 0%;"></div>
          </div>
          <img ng-show="opportunity.image_url" class="image-preview" ng-src="{{opportunity.image_url}}"/>
        </div>
      </div>

      <div class="control-group" ng-show="opportunity.type == 'Emergency'">
        <label for="opportunity_contact_phone" class="control-label">Contact Phone #</label>
        <div class="controls">
          <input id="opportunity_contact_phone" type="text" ng-model="opportunity.contact_phone" size="30" class="input-xlarge">
        </div>
      </div>

      <div class="control-group two-lines" ng-class="{error:newOpportunity.opportunity_start_location.$invalid}">
        <label for="opportunity_start_location" class="control-label">Pick up terminal or address *</label>
        <div class="controls">
          <input id="opportunity_start_location" name="opportunity_start_location" type="text" ng-model="opportunity.start_location" size="30" class="input-xlarge" required>
          <p class="help-block">ex: Sunnyvale, CA</p>
        </div>
      </div>

      <div class="control-group two-lines">
        <label for="opportunity_end_location" class="control-label">Drop off<p class="help-block">(if applicable)</p></label>
        <div class="controls">
          <input id="opportunity_end_location" type="text" ng-model="opportunity.end_location" size="30" class="input-xlarge">
          <p class="help-block">ex: San Francisco, CA</p>
        </div>
      </div>

      <div class="control-group">
        <label for="opportunity_trip_type" class="control-label">Trip Type</label>
        <div class="controls">
          <select id="opportunity_trip_type" name="opportunity_trip_type" ng-model="opportunity.trip_type" ng-options="t for t in TRIP_TYPES">
            <option value=""></option>
          </select>
        </div>
      </div>

      <div class="control-group" ng-class="{error:newOpportunity.opportunity_start_date.$invalid}">
        <label for="opportunity_start_date" class="control-label">Pick up date *</label>
        <div class="controls">
          <input id="opportunity_start_date" name="opportunity_start_date" type="text" ng-model="opportunity.start_date" class="input-small" size="10" ui-date="dateOptions" ui-date-format required>
          <span class="add-on"><i class="icon-calendar"></i></span>
          <input id="opportunity_start_time" name="opportunity_start_time" type="text" class="input-small" ng-model="opportunity.start_time" ui-mask="'99:99'" required>
          <span class="time">Time</span>
        </div>
      </div>

      <div class="control-group" ng-class="{error:newOpportunity.opportunity_end_date.$invalid}">
        <label for="opportunity_end_date" class="control-label">Drop off date *</label>
        <div class="controls">
          <input id="opportunity_end_date" name="opportunity_end_date" type="text" ng-model="opportunity.end_date" class="input-small" size="10" ui-date="dateOptions" ui-date-format required>
          <span class="add-on"><i class="icon-calendar"></i></span>
          <input id="opportunity_end_time" name="opportunity_end_time" type="text" class="input-small" ng-model="opportunity.end_time" ui-mask="'99:99'" required>
          <span class="time">Time</span>
        </div>
      </div>

      <div class="control-group" ng-class="{error:newOpportunity.opportunity_bidding_ends.$invalid}">
        <label for="opportunity_bidding_ends" class="control-label">Bidding Duration *</label>
        <div class="controls">
          <input id="opportunity_bidding_ends" name="opportunity_bidding_ends" type="text" class="input-small" ng-model="opportunity.bidding_duration_hrs" ui-mask="'9?9'" required>
          <span class="time">hours</span>
        </div>
      </div>

      <div class="control-group">
        <label for="opportunity_ada_required" class="checkbox">
          <div class="controls">
            <input id="opportunity_ada_required" type="checkbox" ng-model="opportunity.ada_required" value="1">
            ADA vehicle required?
          </div>
        </label>

        <!--<label for="opportunity_for_favorites_only" class="checkbox">-->
          <!--<div class="controls">-->
            <!--<input id="opportunity_for_favorites_only" type="checkbox" ng-model="opportunity.for_favorites_only" value="1">-->
            <!--Limit view to Favorite only?-->
          <!--</div>-->
        <!--</label>-->

        <label for="opportunity_forward_auction" class="checkbox">
          <div class="controls">
            <input id="opportunity_forward_auction" type="checkbox" ng-model="opportunity.forward_auction" value="1" ng-disabled="opportunity.type == 'Vehicle Needed' || opportunity.type == 'Vehicle for Hire'">
            Sell?
          </div>
        </label>

        <label for="opportunity_quick_winnable" class="checkbox">
          <div class="controls">
            <input id="opportunity_quick_winnable" type="checkbox" ng-model="opportunity.quick_winnable" value="1">
            Enable "Win it now?"
          </div>
        </label>
      </div>

      <div class="control-group" ng-show="opportunity.quick_winnable" ng-class="{error:newOpportunity.win_it_now_price.$invalid}">
        <label for="opportunity_win_it_now_price" class="control-label">Win it now price</label>
        <div class="controls">
          <input id="opportunity_win_it_now_price" name="win_it_now_price" ng-model="opportunity.win_it_now_price" ui-validate="{ win_it_now_price: validateOptionalNumber }" size="30" class="input-small">
          <p ng-show="newOpportunity.win_it_now_price.$invalid" class="help-block error">Enter only numeric characters.</p>
          <p class="help-block">eg: 1000</p>
        </div>
      </div>

      <div class="control-group" ng-class="{error:newOpportunity.reserve_amount.$invalid}">
        <label for="opportunity_reserve_amount" class="control-label">Starting price</label>
        <div class="controls">
          <input id="opportunity_reserve_amount" name="reserve_amount" ng-model="opportunity.reserve_amount" ui-validate="{ reserve_amount: validateOptionalNumber }" size="30" class="input-small">
          <p ng-show="newOpportunity.reserve_amount.$invalid" class="help-block error">Enter only numeric characters.</p>
          <p class="help-block">eg: 1000</p>
        </div>
      </div>

      <div class="form-actions">
        <button ng-click="save()" class="btn btn-primary" ng-disabled="newOpportunity.$invalid">
          Save Opportunity
        </button>
      </div>
    </form>
  </div>
</div>
